<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Igreja</title>
    <link rel="shortcut icon" href="./assets/img/admac.png" type="image/x-icon">in
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f8fafc 60%, #ffe082 100%);
        }
        .login-box {
            background: #fff;
            padding: 2.5rem 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 4px 32px rgba(0,0,0,0.08);
            width: 100%;
            max-width: 370px;
            text-align: center;
        }
        .login-logo {
            width: 80px;
            height: 80px;
            object-fit: contain;
            margin-bottom: 1rem;
        }
        .login-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: #ff9800;
        }
        .form-control {
            margin-bottom: 1rem;
        }
        .dashboard-container { display: none; }
        .error-msg { color: #d32f2f; font-size: 1rem; margin-bottom: 1rem; }
    </style>
</head>
<body>
    <div class="login-container" id="loginContainer">
        <div class="login-box shadow-lg">
            <img src="assets/img/admac.png" alt="Logo ADMAC" class="login-logo">
            <div class="login-title">Painel Administrativo</div>
            <div id="loginError" class="error-msg" style="display:none;"></div>
            <input type="email" id="loginEmail" class="form-control" placeholder="E-mail" required autofocus>
            <input type="password" id="loginPassword" class="form-control" placeholder="Senha" required>
            <button class="btn btn-warning w-100" onclick="login()">Entrar</button>
        </div>
    </div>
    <div class="dashboard-container" id="dashboardContainer">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo d-flex align-items-center">
                <img src="assets/img/admac.png" alt="Logo ADMAC" style="width:32px; height:32px; object-fit:contain; margin-right:8px; vertical-align:middle;"> <span>PowerBI.<span class="tips">tips</span></span>
            </div>
            <nav>
                <ul>
                    <li class="active"><i class="fas fa-home"></i> Painel</li>
                    <li><i class="fas fa-chart-bar"></i> Relatórios</li>
                    <li><i class="fas fa-cog"></i> Configurações</li>
                    <li><i class="fas fa-user"></i> Usuário</li>
                </ul>
            </nav>
        </aside>
        <!-- Main Content -->
        <main class="main-content">
            <header class="dashboard-header d-flex justify-content-between align-items-center py-3 px-2" style="border-bottom:1px solid #eee; background:#fff;">
                <div class="d-flex align-items-center gap-2">
                    <img src="assets/img/admac.png" alt="Logo ADMAC" style="width:40px; height:40px; object-fit:contain; margin-right:10px;">
                    <h1 class="h4 mb-0">Painel Administrativo</h1>
                </div>
                <div class="header-icons">
                    <button class="btn btn-outline-danger btn-sm" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Sair</button>
                </div>
            </header>
            <section class="dashboard-charts">
                <!-- Campos para adicionar/remover páginas -->
                <div class="card mb-4 p-4">
                    <h2 class="mb-3" style="font-size:1.2rem; color:#ff9800;"><i class="fas fa-plus-circle me-2"></i>Adicionar Página</h2>
                    <form class="row g-2 align-items-end" onsubmit="adicionarPagina(); return false;">
                        <div class="col-md-5">
                            <input type="text" id="novaPaginaNome" class="form-control" placeholder="Nome da Página">
                        </div>
                        <div class="col-md-5">
                            <input type="text" id="novaPaginaUrl" class="form-control" placeholder="URL da Página (ex: nova.html)">
                        </div>
                        <div class="col-md-2">
                            <button type="submit" class="btn btn-success w-100"><i class="fas fa-plus"></i> Adicionar</button>
                        </div>
                    </form>
                </div>
                <div class="card mb-4 p-4">
                    <h2 class="mb-3" style="font-size:1.2rem; color:#d32f2f;"><i class="fas fa-trash-alt me-2"></i>Remover Página</h2>
                    <form class="row g-2 align-items-end" onsubmit="removerPagina(); return false;">
                        <div class="col-md-10">
                            <input type="text" id="removerPaginaUrl" class="form-control" placeholder="URL da Página para Remover (ex: nova.html)">
                        </div>
                        <div class="col-md-2">
                            <button type="submit" class="btn btn-danger w-100"><i class="fas fa-trash"></i> Remover</button>
                        </div>
                    </form>
                </div>
                <!-- Relatório das páginas criadas -->
                <div class="card mb-4 p-4">
                    <h2 class="mb-3" style="font-size:1.2rem; color:#1976d2;"><i class="fas fa-list me-2"></i>Relatório de Páginas Criadas</h2>
                    <div class="table-responsive">
                        <table class="table table-bordered align-middle mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th>Nome da Página</th>
                                    <th>URL</th>
                                    <th>Foto</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="relatorioPaginas">
                                <!-- Linhas adicionadas via JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- Painel de KPIs e Gráficos -->
                <div class="chart-card">
                    <h2>Bar Chart</h2>
                    <img src="assets/img/bar-chart-placeholder.png" alt="Bar Chart" class="chart-img">
                </div>
                <div class="kpi-row">
                    <div class="kpi-card">15 Mil</div>
                    <div class="kpi-card">17 Mil</div>
                    <div class="kpi-card">14 Mil</div>
                </div>
                <div class="chart-card">
                    <h2>Area Chart</h2>
                    <img src="assets/img/area-chart-placeholder.png" alt="Area Chart" class="chart-img">
                </div>
            </section>
        </main>
    </div>
    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Login simples
        function login() {
            var email = document.getElementById('loginEmail').value;
            var senha = document.getElementById('loginPassword').value;
            var error = document.getElementById('loginError');
            if(email === 'admacdf@gmail.com' && senha === 'admac2024') {
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('dashboardContainer').style.display = 'flex';
            } else {
                error.style.display = 'block';
                error.textContent = 'Usuário ou senha incorretos!';
            }
        }
        function logout() {
            document.getElementById('dashboardContainer').style.display = 'none';
            document.getElementById('loginContainer').style.display = 'flex';
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
            document.getElementById('loginError').style.display = 'none';
        }
        // Lista de páginas criadas (apenas interface)
        var paginasCriadas = [];
        var paginaSelecionada = null;
        function atualizarRelatorioPaginas() {
            var tbody = document.getElementById('relatorioPaginas');
            tbody.innerHTML = '';
            if (paginasCriadas.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" class="text-center text-muted">Nenhuma página criada ainda.</td></tr>';
            } else {
                paginasCriadas.forEach(function(p, idx){
                    var tr = document.createElement('tr');
                    var foto = p.foto ? `<img src="${p.foto}" alt="Foto" style="width:40px;height:40px;object-fit:cover;border-radius:50%;">` : '<span class="text-muted">(Sem foto)</span>';
                    tr.innerHTML = `<td>${p.nome}</td><td>${p.url}</td><td>${foto}</td><td>
                        <button class='btn btn-primary btn-sm me-1' onclick='selecionarPagina(${idx})'><i class="fas fa-eye"></i> Selecionar</button>
                        <label class='btn btn-secondary btn-sm mb-0'><i class="fas fa-image"></i> Foto<input type='file' accept='image/*' style='display:none' onchange='adicionarFotoPagina(event,${idx})'></label>
                    </td>`;
                    tbody.appendChild(tr);
                });
            }
        }
        function adicionarPagina() {
            var nome = document.getElementById('novaPaginaNome').value;
            var url = document.getElementById('novaPaginaUrl').value;
            if(nome && url) {
                // Verifica se já existe
                var existe = paginasCriadas.some(function(p){ return p.url === url; });
                if(!existe) {
                    paginasCriadas.push({nome: nome, url: url});
                    atualizarRelatorioPaginas();
                    var toast = document.createElement('div');
                    toast.className = 'toast align-items-center text-bg-success border-0 show position-fixed bottom-0 end-0 m-3';
                    toast.role = 'alert';
                    toast.innerHTML = '<div class="d-flex"><div class="toast-body">Página "' + nome + '" adicionada.</div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button></div>';
                    document.body.appendChild(toast);
                    setTimeout(function(){ toast.remove(); }, 3000);
                    document.getElementById('novaPaginaNome').value = '';
                    document.getElementById('novaPaginaUrl').value = '';
                } else {
                    var toast = document.createElement('div');
                    toast.className = 'toast align-items-center text-bg-danger border-0 show position-fixed bottom-0 end-0 m-3';
                    toast.role = 'alert';
                    toast.innerHTML = '<div class="d-flex"><div class="toast-body">Já existe uma página com essa URL.</div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button></div>';
                    document.body.appendChild(toast);
                    setTimeout(function(){ toast.remove(); }, 3000);
                }
            } else {
                var toast = document.createElement('div');
                toast.className = 'toast align-items-center text-bg-danger border-0 show position-fixed bottom-0 end-0 m-3';
                toast.role = 'alert';
                toast.innerHTML = '<div class="d-flex"><div class="toast-body">Preencha o nome e a URL da página.</div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button></div>';
                document.body.appendChild(toast);
                setTimeout(function(){ toast.remove(); }, 3000);
            }
        }
        function removerPagina() {
            var url = document.getElementById('removerPaginaUrl').value;
            if(url) {
                var index = paginasCriadas.findIndex(function(p){ return p.url === url; });
                if(index !== -1) {
                    paginasCriadas.splice(index, 1);
                    atualizarRelatorioPaginas();
                    var toast = document.createElement('div');
                    toast.className = 'toast align-items-center text-bg-warning border-0 show position-fixed bottom-0 end-0 m-3';
                    toast.role = 'alert';
                    toast.innerHTML = '<div class="d-flex"><div class="toast-body">Página removida do relatório.</div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button></div>';
                    document.body.appendChild(toast);
                    setTimeout(function(){ toast.remove(); }, 3000);
                } else {
                    var toast = document.createElement('div');
                    toast.className = 'toast align-items-center text-bg-danger border-0 show position-fixed bottom-0 end-0 m-3';
                    toast.role = 'alert';
                    toast.innerHTML = '<div class="d-flex"><div class="toast-body">Página não encontrada no relatório.</div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button></div>';
                    document.body.appendChild(toast);
                    setTimeout(function(){ toast.remove(); }, 3000);
                }
                document.getElementById('removerPaginaUrl').value = '';
            } else {
                var toast = document.createElement('div');
                toast.className = 'toast align-items-center text-bg-danger border-0 show position-fixed bottom-0 end-0 m-3';
                toast.role = 'alert';
                toast.innerHTML = '<div class="d-flex"><div class="toast-body">Preencha a URL da página para remover.</div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button></div>';
                document.body.appendChild(toast);
                setTimeout(function(){ toast.remove(); }, 3000);
            }
        }
        function adicionarFotoPagina(event, idx) {
            var file = event.target.files[0];
            if(file) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    paginasCriadas[idx].foto = e.target.result;
                    atualizarRelatorioPaginas();
                    if(paginaSelecionada === idx) atualizarPainelSelecionado();
                };
                reader.readAsDataURL(file);
            }
        }
        function selecionarPagina(idx) {
            paginaSelecionada = idx;
            if(!paginasCriadas[idx].acessos) paginasCriadas[idx].acessos = 0;
            paginasCriadas[idx].acessos++;
            atualizarPainelSelecionado();
            atualizarRelatorioPaginas();
        }
        function atualizarPainelSelecionado() {
            var kpis = document.querySelectorAll('.kpi-card');
            var chartImgs = document.querySelectorAll('.chart-img');
            if(paginaSelecionada !== null && paginasCriadas[paginaSelecionada]) {
                var p = paginasCriadas[paginaSelecionada];
                // Atualiza KPI central
                if(kpis[1]) kpis[1].innerHTML = `<span style='font-size:1.3rem;font-weight:bold;'>${p.acessos||0} Acessos</span>`;
                // Atualiza foto nos gráficos
                chartImgs.forEach(function(img){
                    img.src = p.foto || 'https://via.placeholder.com/300x120?text=Sem+Foto';
                    img.alt = p.nome;
                });
            } else {
                if(kpis[1]) kpis[1].innerHTML = '17 Mil';
                chartImgs.forEach(function(img){
                    img.src = 'assets/img/bar-chart-placeholder.png';
                    img.alt = 'Bar Chart';
                });
            }
        }
        // Atualiza painel ao trocar de página
        document.addEventListener('DOMContentLoaded', function(){ atualizarRelatorioPaginas(); atualizarPainelSelecionado(); });
    </script>
</body>
</html> 